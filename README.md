# Аналитическая система извлечения данных на естественном языке.

## Инструкция для установки и запуска
1. Зарегистрируйтесь на сайте https://openrouter.ai
2. Получите Api ключ для доступа к языковым моделям (или запрсите его у автора  этой программы)
3. Инициализируйте Api ключ для работы с программой

На Windows (PowerShell)
`$env:XINSIDE_OPENROUTER_KEY = "<OPENROUTER_API_KEY>"`
На Linux:
`export XINSIDE_OPENROUTER_KEY=<OPENROUTER_API_KEY>`

4. Установите окружение
```
python -m venv venv
source venv/bin/activate # На Windows: venv\Scripts\activate
pip install -r requirements.txt
``` 

Запустите программу, и следуйте инструкциям.
`python xinside.py`

## Процесс создания программы

1) В начале я думал реализовать программу через генерацию условия для метода `query()` Pandas-датафрейма. Однако такое решение недостаточно функционально, например отсутствует группировка.

2) Второе решение - генерация Python кода для нужного запроса с помощью Pandas и выполнения его через `exec()`. Несмотря на то, что такое решение можно запустить в изолированном Docker-контейнере, это во-первых усложняет разработку, во-вторых сама возможность запуска где-бы то нибыло кода, сгенерированного LLM не добавляет безопасности.

3) В итоге наилучшим решением я посчитал генерацию SQL-запроса в комбинации с использованием библиотеки Polars. Это относительно безопасно, быстро (с точки зрения разработки) и функционально.

Качество решения я оцениваю пока на тройку. Два запроса из трех сработали, один нет. Это и есть критерий качества - доля верно отработавших запросов. 

Для улучшения решения можно поиграться с выбором модели и доработать промпт. 